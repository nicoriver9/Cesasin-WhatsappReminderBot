import { Message } from "whatsapp-web.js";
import { Observable } from "rxjs";
import { PrismaService } from "../prisma/prisma.service";
export declare class WhatsappService {
    private readonly prisma;
    private readonly logger;
    private client;
    private clientInfo;
    private messageStatusMap;
    private clientStatus$;
    private qrCodeSubject$;
    private authenticatedPhoneNumber;
    private currentUserId;
    private conversationModeActive;
    private botEnabled;
    private conversationalResponses;
    private reminderResponses;
    private processingLocks;
    private presenceUpdateInterval;
    private remoteAuth;
    constructor(prisma: PrismaService);
    private loadPhoneNumbersToAvoid;
    getClientStatus(): Observable<string>;
    getQRCode(): Observable<string | null>;
    getAuthenticatedPhoneNumber(): Observable<string | null>;
    private startKeepAlive;
    private startPresenceUpdates;
    private stopPresenceUpdates;
    sendMessage(to: string, message: string, options?: string): Promise<number>;
    private loadConversationalResponses;
    private expectedResponses;
    handleConversationalMessage(message: Message): Promise<void>;
    private savePatientResponse;
    private updatePatientResponse;
    private loadReminderResponses;
    handleReminderMessage(message: Message, reminderMessage: any): Promise<void>;
    private handleCancelledAppointment;
    private handleRescheduledAppointment;
    private saveAppointmentReschedule;
    private handleInitialGreeting;
    private formatWelcomeMessage;
    private sendResponse;
    private updatePatientReminder;
    private convertToSpanishDate;
    setCurrentUserId(userId: number): void;
    startConversationMode(): void;
    stopConversationMode(): void;
    isConversationModeActive(): boolean;
    setBotEnabled(enabled: boolean): void;
    isBotEnabled(): boolean;
    private logUserAudit;
    private getIPAddress;
    private clearAuthAndCacheFolders;
    handleConfirmedAppointment(from: string, doctorName: string, patientFullName: string, appointmentDate: Date, whatsappMsgId: number): Promise<void>;
}
